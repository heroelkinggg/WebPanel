### **Project: Create an Automated Android Control Backend**

**Objective:**
Build a backend server application that provides two core functions: 1) A secure way for an admin to create new users. 2) An automated system to build and provide user-specific Android APKs.

**Core Technologies:**
*   **Server-side Language:** Node.js with Express.js is preferred.
*   **Server Environment:** A Linux-based cloud server (e.g., AWS EC2) with the Android SDK and Gradle installed.

---

### **API 1: User Management**

**Endpoint:** `POST /api/create-user`

**Request Body (JSON):**
```json
{
  "adminToken": "ID_TOKEN_OF_LOGGED_IN_ADMIN",
  "newUserEmail": "newuser@example.com",
  "newUserPassword": "password123",
  "trialHours": 1
}
```

**Logic:**
1.  Receive the request. Use the Firebase Admin SDK's `auth().verifyIdToken()` to verify the `adminToken`.
2.  Check if the verified user has an admin claim (you will need to set this up once in Firebase for your admin account).
3.  If verified as an admin, use `auth().createUser()` to create the new user with the provided email and password.
4.  After creation, get the new user's UID. Go to the Realtime Database and set their trial expiration under `/user_info/{NEW_USER_UID}`. Calculate the expiration by adding `trialHours` to the current time.
5.  Respond with success or a detailed error.

---

### **API 2: Automated APK Builder**

**Endpoint:** `POST /api/build-apk`

**Request Body (JSON):**
```json
{
  "userId": "USER_UID_TO_BUILD_FOR"
}
```

**Logic:**
1.  Receive the `userId`.
2.  Programmatically read the Android source files: `SendInfoWorker.kt` and `SmsWorker.kt`.
3.  Replace the placeholder `USER_ID` in both files with the `userId` from the request.
4.  Execute a shell command to run the Gradle build (`./gradlew :app:assembleRelease`).
5.  On successful build, find the APK, rename it (e.g., `xhero-USER_ID.apk`), and move it to a public download directory.
6.  Respond with a JSON object containing the download URL: `{"downloadUrl": "/downloads/xhero-USER_ID.apk"}`.

---

This prompt contains the full specification for building the necessary backend to power the advanced features of the xHERO panel.